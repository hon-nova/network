{% extends "network/layout.html" %} 
{% load static %}
{%block title%}Home Page{%endblock%} 

{%block body %}
<div class="index-container">
  <div class="new-post">
    <form action="{% url 'posts' %}" method="POST">
      {%csrf_token%}
      <div class="sub-new-post">
        <p>New Post:</p>
        <div class="create-input">
          <textarea name="content"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Post</button>
      </div>
    </form>
  </div>
  {%if posts and like_counts%}
  <div class="new-post">
    {%for post in posts %}
    <div class="sub-new-post">
      <div class="d-flex">
        <i class="bi bi-person-bounding-box"></i>
        <h5 class="mx-1">
          <a href="{%url 'profile' post.poster.id %}"
            >{{post.poster.username}}</a
          >
        </h5>
      </div>
      {%if request.user == post.poster%}
      <i class="bi bi-pencil-fill pencil" id="btnEdit"></i>
      {%endif%}
      <p>{{ post.content }}</p>
      <p>{{ post.timestamp }}</p>
      
      <div class="like">       
        <button type="button" data-post-id="{{ post.id }}" class="like-btn liked" id="btnLike">
          <i class="bi bi-heart-fill heart" id="heart-icon-{{ post.id }}"></i>
      </button>   
     
      {% comment %} {%if like_counts%}
      {% for key,value in like_counts%}         
      <span id="initial-count-{{post.id}}">{{value}}</span> 
         {%endfor%}         
      {%endif%} {% endcomment %}
     
      <span id="likes-count-{{ post.id }}"></span>  
    </div>
    </div>
    {%endfor%} 
  </div>
  {%endif%}
  
</div>
{%block script%}
  <script>const csrfToken = "{{ csrf_token }}"</script>
  <script src="{% static 'network/index.js' %}"></script>
{%endblock%}
{% endblock %}
